.lcni-app .lcni-stock-filter,
.lcni-filter-wrapper { display:block; }

.lcni-app .lcni-stock-filter .lcni-filter-toolbar { display:flex; justify-content:flex-end; gap:8px; margin-bottom:0; }
.lcni-app .lcni-stock-filter .lcni-filter-panel,
.lcni-app .lcni-stock-filter .lcni-column-pop { padding:10px; margin-bottom:10px; border:1px solid #ddd; background:#fff; }
.lcni-app .lcni-stock-filter .lcni-filter-panel.is-collapsed .lcni-filter-panel-body,
.lcni-app .lcni-stock-filter .lcni-filter-panel.is-collapsed .lcni-filter-panel-actions { display:none; }
.lcni-app .lcni-stock-filter .lcni-filter-panel.is-collapsed { margin:0; padding:0; border:0; }

.lcni-app .lcni-stock-filter .lcni-filter-criteria-grid { display:grid; grid-template-columns:35% 65%; gap:12px; align-items:stretch; height:100%; min-height:0; }
.lcni-app .lcni-stock-filter .lcni-filter-criteria-tabs { display:flex; flex-direction:column; gap:6px; max-height:320px; overflow:auto; }
.lcni-app .lcni-stock-filter .lcni-filter-tab { display:flex; align-items:center; gap:8px; text-align:left; padding:8px; border:1px solid #e5e7eb; background:#fff; color:var(--lcni-panel-label-color,#111827); font-size:var(--lcni-panel-label-size,13px); cursor:pointer; }
.lcni-app .lcni-stock-filter .lcni-filter-tab.is-active { border-color:#3b82f6; background:#eff6ff; }
.lcni-app .lcni-stock-filter .lcni-filter-tab-check { visibility:hidden; color:#16a34a; font-weight:700; }
.lcni-app .lcni-stock-filter .lcni-filter-tab-check.is-visible { visibility:visible; }

.lcni-app .lcni-stock-filter .lcni-filter-criteria-values { min-height:220px; display:flex; flex-direction:column; }
.lcni-app .lcni-stock-filter .lcni-filter-value-panel { display:none; }
.lcni-app .lcni-stock-filter .lcni-filter-value-panel.is-active { display:block; }
.lcni-app .lcni-stock-filter .lcni-filter-value-panel strong { display:block; margin-bottom:8px; color:var(--lcni-panel-label-color,#111827); font-size:var(--lcni-panel-label-size,13px); }
.lcni-app .lcni-stock-filter .lcni-filter-check-list { display:grid; grid-template-columns:repeat(auto-fill,minmax(120px,1fr)); gap:4px; color:var(--lcni-panel-value-color,#374151); font-size:var(--lcni-panel-value-size,13px); max-height:280px; overflow:auto; }
.lcni-app .lcni-stock-filter .lcni-filter-range-wrap { display:grid; grid-template-columns:1fr 1fr; gap:8px; }
.lcni-app .lcni-stock-filter .lcni-filter-range-wrap input { width:100%; color:var(--lcni-panel-value-color,#374151); font-size:var(--lcni-panel-value-size,13px); }

.lcni-app .lcni-stock-filter .lcni-filter-range-dual { gap:10px; }
.lcni-app .lcni-stock-filter .lcni-filter-range-track { position:relative; height:26px; }
.lcni-app .lcni-stock-filter .lcni-filter-range-track::before { content:""; position:absolute; left:0; right:0; top:11px; height:4px; border-radius:999px; background:#e5e7eb; }
.lcni-app .lcni-stock-filter .lcni-filter-range-fill { position:absolute; top:11px; height:4px; border-radius:999px; background:#3b82f6; left:0; width:100%; }
.lcni-app .lcni-stock-filter .lcni-filter-range-track input[type="range"] { position:absolute; left:0; top:0; width:100%; height:26px; margin:0; background:transparent; pointer-events:none; -webkit-appearance:none; appearance:none; }
.lcni-app .lcni-stock-filter .lcni-filter-range-track input[type="range"]::-webkit-slider-thumb { -webkit-appearance:none; appearance:none; width:14px; height:14px; border-radius:50%; background:#2563eb; border:2px solid #fff; box-shadow:0 0 0 1px #2563eb; pointer-events:auto; cursor:pointer; }
.lcni-app .lcni-stock-filter .lcni-filter-range-track input[type="range"]::-moz-range-thumb { width:14px; height:14px; border-radius:50%; background:#2563eb; border:2px solid #fff; box-shadow:0 0 0 1px #2563eb; pointer-events:auto; cursor:pointer; }
.lcni-app .lcni-stock-filter .lcni-filter-range-values { display:flex; justify-content:space-between; color:var(--lcni-panel-value-color,#374151); font-size:var(--lcni-panel-value-size,13px); }

.lcni-app .lcni-stock-filter .lcni-filter-panel-actions { margin-top:10px; display:flex; align-items:center; gap:8px; flex-wrap:wrap; }
.lcni-app .lcni-stock-filter .lcni-saved-filter-label { font-size:var(--lcni-panel-label-size,13px); color:var(--lcni-panel-label-color,#111827); }
.lcni-app .lcni-stock-filter .lcni-filter-panel-actions select { min-width:190px; height:36px; margin-right:0; font-size:var(--lcni-panel-value-size,13px); border:1px solid #d1d5db; border-radius:8px; padding:0 10px; }
.lcni-app .lcni-stock-filter .lcni-filter-panel-actions .lcni-select-saved-filter { background:var(--lcni-saved-filter-bg,#fff); color:var(--lcni-saved-filter-color,#111827); border-color:var(--lcni-saved-filter-border,#d1d5db); }
.lcni-app .lcni-stock-filter .lcni-filter-panel-actions .lcni-select-template-filter { background:var(--lcni-template-filter-bg,#fff); color:var(--lcni-template-filter-color,#111827); border-color:var(--lcni-template-filter-border,#d1d5db); }

.lcni-app .lcni-stock-filter .lcni-column-pop { display:grid; grid-template-columns:repeat(auto-fill,minmax(150px,1fr)); gap:6px; }
.lcni-app .lcni-stock-filter .lcni-column-option { display:flex; align-items:center; gap:8px; border:1px solid #e5e7eb; border-radius:8px; padding:6px 8px; background:#fff; }
.lcni-app .lcni-stock-filter .lcni-column-option span { flex:1; }
.lcni-app .lcni-stock-filter .lcni-table-scroll { max-height:calc(100vh - 180px); overflow:auto; overscroll-behavior:contain; overscroll-behavior-x:contain; scrollbar-gutter:stable; }
.lcni-app .lcni-stock-filter .lcni-table { width:100%; border-collapse:separate; border-spacing:0; }
.lcni-app .lcni-stock-filter .lcni-table th { font-weight:400; position:sticky; top:0; z-index:3; background:var(--lcni-table-header-bg,#f3f4f6); color:var(--lcni-table-header-color,#111827); font-size:var(--lcni-table-header-size,12px); border-bottom:var(--lcni-row-divider-width,1px) solid var(--lcni-row-divider-color,#e5e7eb); height:var(--lcni-table-header-height,42px); white-space:nowrap; padding-left:5px; padding-right:5px; }
.lcni-app .lcni-stock-filter .lcni-table td { background:var(--lcni-table-value-bg,#fff); color:var(--lcni-table-value-color,#111827); font-size:var(--lcni-table-value-size,13px); border-bottom:var(--lcni-row-divider-width,1px) solid var(--lcni-row-divider-color,#e5e7eb); white-space:nowrap; word-break:keep-all; height:var(--lcni-table-row-height,36px); padding-left:5px; padding-right:5px; }
.lcni-app .lcni-stock-filter .lcni-table tr:hover td { background:var(--lcni-row-hover-bg,#eef2ff); }
.lcni-app .lcni-stock-filter .lcni-table tbody tr { cursor:pointer; }
.lcni-app .lcni-stock-filter .lcni-table .is-sticky-col { position:sticky; left:0; z-index:2; }
.lcni-app .lcni-stock-filter .lcni-table th.is-sticky-col { z-index:4; }


.lcni-app .lcni-stock-filter .lcni-filter-summary { font-size:12px; color:#374151; }
.lcni-app .lcni-stock-filter .lcni-filter-summary-desktop { display:block; margin-top:auto; padding-top:10px; align-items:center; }
.lcni-app .lcni-stock-filter .lcni-filter-summary-mobile { display:none; margin:8px 0; }
.lcni-filter-toast { position:fixed; right:16px; bottom:16px; z-index:9999; padding:8px 12px; border-radius:8px; background:#111827; color:#fff; }
.lcni-filter-modal-backdrop { position:fixed; inset:0; z-index:10000; display:flex; align-items:center; justify-content:center; background:rgba(0,0,0,.45); }
.lcni-filter-modal { min-width:320px; max-width:520px; padding:16px; border-radius:10px; background:#fff; }
.lcni-filter-modal-actions { display:flex; justify-content:flex-end; flex-wrap:wrap; gap:8px; margin-top:12px; }
.lcni-filter-watchlist-options { display:grid; gap:6px; max-height:260px; overflow:auto; }

.lcni-app .lcni-stock-filter.lcni-disable-sticky-header .lcni-table th { position: static; }

.lcni-app .lcni-stock-filter [data-column-pop][hidden] { display:none !important; }

@media (max-width: 767px) {
  .lcni-app .lcni-stock-filter { display:flex; flex-direction:column; height:100vh; min-height:100vh; overflow:hidden; }
  .lcni-app .lcni-stock-filter .lcni-filter-toolbar{position:sticky;top:0;background:#fff;z-index:5;padding-bottom:6px;flex:0 0 auto;}
  .lcni-app .lcni-stock-filter .lcni-filter-summary-mobile{display:block;position:sticky;top:38px;background:#fff;z-index:5;padding:4px 0 6px;flex:0 0 auto;}
  .lcni-app .lcni-stock-filter .lcni-filter-summary-desktop{display:none;}
  .lcni-app .lcni-stock-filter .lcni-filter-panel,
  .lcni-app .lcni-stock-filter .lcni-column-pop{position:relative;left:auto;right:auto;top:auto;bottom:auto;max-height:none;overflow:auto;z-index:4;margin:0 0 8px;flex:1 1 auto;}
  .lcni-app .lcni-stock-filter .lcni-filter-panel{display:flex;flex-direction:column;min-height:70vh;max-height:calc(100vh - 96px);padding-bottom:calc(8px + env(safe-area-inset-bottom,0px));}
  .lcni-app .lcni-stock-filter .lcni-filter-panel-body{flex:1 1 auto;min-height:0;overflow:auto;}
  .lcni-app .lcni-stock-filter .lcni-filter-panel-body .lcni-filter-criteria-grid{height:100%;min-height:0;grid-template-columns:1fr;}
  .lcni-app .lcni-stock-filter .lcni-filter-panel-body .lcni-filter-criteria-tabs{max-height:none;min-height:0;}
  .lcni-app .lcni-stock-filter .lcni-filter-panel-body .lcni-filter-criteria-values{min-height:0;flex:1 1 auto;}
  .lcni-app .lcni-stock-filter .lcni-filter-panel-body .lcni-filter-value-panel.is-active{height:100%;}

  .lcni-app .lcni-stock-filter .lcni-filter-panel-actions{margin-top:auto;display:flex;flex-wrap:wrap;gap:8px;align-items:center;padding:8px 0 calc(8px + env(safe-area-inset-bottom,0px));border-top:1px solid #e5e7eb;background:#fff;position:sticky;bottom:0;z-index:2;}
  .lcni-app .lcni-stock-filter .lcni-filter-panel-actions .lcni-saved-filter-label{display:none;}
  .lcni-app .lcni-stock-filter .lcni-filter-panel-actions select{min-width:0;width:auto;flex:1 1 180px;}
  .lcni-app .lcni-stock-filter .lcni-filter-panel-actions .lcni-btn{width:auto;max-width:100%;margin:0;flex:0 1 auto;white-space:nowrap;}
  .lcni-app .lcni-stock-filter .lcni-filter-panel.is-collapsed{display:none;}
  .lcni-app .lcni-stock-filter .lcni-table-scroll{max-height:none;flex:1 1 auto;min-height:0;overflow:auto;padding-bottom:72px;}
  .lcni-btn-btn_apply_filter span,.lcni-btn-btn_save_filter span,.lcni-btn-btn_filter_reload span,.lcni-btn-btn_filter_delete span,.lcni-btn-btn_filter_save span,.lcni-btn-btn_filter_clear span{display:none;}
}

.lcni-app .lcni-stock-filter .lcni-table .lcni-cell-number { text-align:right; }
.lcni-app .lcni-stock-filter .lcni-table .lcni-cell-text { text-align:left; }

.lcni-filter-cell-hint{position:fixed;z-index:10001;padding:4px 8px;border-radius:6px;background:rgba(17,24,39,.92);color:#fff;font-size:11px;pointer-events:none;transform:translate(12px,-14px);max-width:220px;line-height:1.35;}
